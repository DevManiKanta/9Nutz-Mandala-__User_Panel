(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{6568:function(e,t,r){Promise.resolve().then(r.bind(r,8023))},8023:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p},dynamic:function(){return g}});var l=r(7437),s=r(2265),a=r(2502),i=r(1828),d=r(7972),o=r(4322),n=r(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,n.Z)("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);var u=r(5925),m=r(2748),x=r(9100),h=r(5884);r(8207);var v=r(4033);let g="force-dynamic";function p(){var e;let[t,r]=(0,s.useState)(""),n=(0,v.useSearchParams)();(0,s.useEffect)(()=>{let e=((null==n?void 0:n.get("tab"))||"").toLowerCase();["orders","profile","tracking","favourites"].includes(e)?r(e):t||r("profile")},[n]);let[g,p]=(0,s.useState)(!1),[f,y]=(0,s.useState)(""),[j,b]=(0,s.useState)(!1),[N,w]=(0,s.useState)(!1);(0,s.useRef)(null);let{user:D,token:k,logout:S}=(0,a.useAuth)(),{getUserOrders:O}=(0,i.useOrders)(),{favorites:_=[],loading:A,refreshFavorites:P}=(0,h.useWishlist)()||{};D&&O(D.id);let E=(0,s.useMemo)(()=>{let e=Array.isArray(_)?_:[];return e.map((e,t)=>{var r,l,s,a,i,d,o,n,c,u,m,x,h,v,g,p,f,y,j,b,N,w;let D=null!==(u=null!==(c=null!==(n=null==e?void 0:e.product_id)&&void 0!==n?n:null==e?void 0:e.id)&&void 0!==c?c:null==e?void 0:null===(r=e.product)||void 0===r?void 0:r.id)&&void 0!==u?u:null==e?void 0:null===(l=e.product)||void 0===l?void 0:l._id,k=null!=D?String(D):"",S=null!==(v=null!==(h=null!==(x=null!==(m=null==e?void 0:e.name)&&void 0!==m?m:null==e?void 0:e.product_name)&&void 0!==x?x:null==e?void 0:e.title)&&void 0!==h?h:null==e?void 0:null===(s=e.product)||void 0===s?void 0:s.name)&&void 0!==v?v:"Product ".concat(k||t+1),O=null!==(j=null!==(y=null!==(f=null!==(p=null!==(g=null==e?void 0:e.price)&&void 0!==g?g:null==e?void 0:e.offerPrice)&&void 0!==p?p:null==e?void 0:e.product_price)&&void 0!==f?f:null==e?void 0:null===(a=e.product)||void 0===a?void 0:a.offerPrice)&&void 0!==y?y:null==e?void 0:null===(i=e.product)||void 0===i?void 0:i.price)&&void 0!==j?j:null,_=null!==(w=null!==(N=null!==(b=null==e?void 0:e.image_url)&&void 0!==b?b:null==e?void 0:e.image_url)&&void 0!==N?N:null==e?void 0:null===(d=e.product)||void 0===d?void 0:d.image_url)&&void 0!==w?w:Array.isArray(null==e?void 0:null===(o=e.product)||void 0===o?void 0:o.image_url)?e.product.images[0]:null;return{id:k,name:S,price:O,image_url:_}})},[_]);(0,s.useEffect)(()=>{null==P||P()},[]),(0,s.useEffect)(()=>{"favourites"===t&&(null==P||P())},[t]);let[T,C]=(0,s.useState)({label:"",line1:"",city:"",state:"",pincode:"",phone:""});return(null!=k||null!==(e=localStorage.getItem("auth_token"))&&void 0!==e||localStorage.getItem("token"),D)?(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,l.jsx)(u.Toaster,{position:"top-right"}),(0,l.jsx)("main",{children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"User Dashboard"}),(0,l.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:(0,l.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,l.jsx)("aside",{className:"md:w-72 border-b md:border-b-0 md:border-r border-gray-100 bg-gray-50",children:(0,l.jsx)("nav",{className:"p-3 md:p-4 space-y-2",children:[{key:"profile",label:"My Profile",icon:(0,l.jsx)(d.Z,{})},{key:"orders",label:"My Orders",icon:(0,l.jsx)(o.Z,{})},{key:"favourites",label:"Favourites",icon:(0,l.jsx)(c,{})}].map(e=>(0,l.jsxs)("button",{onClick:()=>r(e.key),className:"w-full flex items-center gap-2 px-4 py-3 rounded-lg text-left transition-colors ".concat(t===e.key?"bg-white text-green-600 shadow-sm border border-gray-200":"text-gray-700 hover:bg-white hover:shadow-sm"),children:[(0,l.jsx)("span",{className:"h-4 w-4",children:e.icon}),(0,l.jsx)("span",{className:"font-medium",children:e.label})]},e.key))})}),(0,l.jsxs)("section",{className:"flex-1 p-6 md:p-8",children:["profile"===t&&(0,l.jsx)(m.default,{}),"orders"===t&&(0,l.jsx)(x.default,{}),"favourites"===t&&(0,l.jsxs)("div",{className:"space-y-6 w-full",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"My Favourites"}),(0,l.jsxs)("span",{className:"text-sm text-gray-500",children:[Array.isArray(_)?_.length:0," items"]})]}),A?(0,l.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Loading favourites…"}):0===E.length?(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)(c,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No favourites yet"}),(0,l.jsx)("p",{className:"text-gray-500",children:"Tap the heart on a product to add it here."})]}):(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-100 rounded-lg overflow-hidden",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:E.map((e,t)=>(0,l.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"px-4 py-3",children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[e.image_url?(0,l.jsx)("img",{src:e.image_url,alt:e.image_url,className:"w-10 h-10 rounded object-cover"}):(0,l.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.id&&(0,l.jsxs)("div",{className:"text-xs text-gray-500",children:["#",e.id]})]})]})}),(0,l.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.price?"₹".concat(e.price):"-"}),(0,l.jsx)("td",{className:"px-4 py-3",children:e.id?(0,l.jsx)("a",{href:"/product/".concat(e.id),className:"text-green-600 hover:text-green-700 text-sm font-medium",children:"View"}):(0,l.jsx)("span",{className:"text-gray-400 text-sm",children:"View"})})]},e.id||t))})]})})]})]})]})})]})}),g&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Confirm Logout"}),(0,l.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to log out?"}),(0,l.jsxs)("div",{className:"flex space-x-4",children:[(0,l.jsx)("button",{onClick:()=>p(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,l.jsx)("button",{onClick:()=>{S(),p(!1),u.default.success("Logged out.")},className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Log Out"})]})]})})]}):(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Please Login"})})}},1828:function(e,t,r){"use strict";r.r(t),r.d(t,{OrderProvider:function(){return o},useOrders:function(){return i}});var l=r(7437),s=r(2265);let a=(0,s.createContext)(void 0),i=()=>{let e=(0,s.useContext)(a);if(void 0===e)throw Error("useOrders must be used within an OrderProvider");return e},d=[{id:"order-1",userId:"user-1",items:[{id:"101",name:"Fresh Red Bananas",price:48,quantity:2,image:"https://images.pexels.com/photos/2238309/pexels-photo-2238309.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&dpr=1"}],total:96,status:"delivered",orderDate:new Date("2025-01-10"),deliveryAddress:{name:"John Doe",address:"B62, Pocket B, Sector 7, Rohini, Delhi - 110085",phone:"+91 9876543210"},estimatedDelivery:new Date("2025-01-10")},{id:"order-2",userId:"user-1",items:[{id:"201",name:"Amul Taaza Toned Milk",price:29,quantity:4,image:"https://images.pexels.com/photos/236010/pexels-photo-236010.jpeg?auto=compress&cs=tinysrgb&w=200&h=200&dpr=1"}],total:116,status:"shipped",orderDate:new Date("2025-01-15"),deliveryAddress:{name:"John Doe",address:"B62, Pocket B, Sector 7, Rohini, Delhi - 110085",phone:"+91 9876543210"},estimatedDelivery:new Date("2025-01-16")}],o=e=>{let{children:t}=e,[r,i]=(0,s.useState)(d);return(0,s.useEffect)(()=>{let e=localStorage.getItem("orders");if(e){let t=JSON.parse(e).map(e=>({...e,orderDate:new Date(e.orderDate),estimatedDelivery:e.estimatedDelivery?new Date(e.estimatedDelivery):void 0}));i([...d,...t])}},[]),(0,l.jsx)(a.Provider,{value:{orders:r,addOrder:e=>{let t={...e,id:"order-".concat(Date.now()),orderDate:new Date},l=[...r,t];i(l);let s=l.filter(e=>!d.find(t=>t.id===e.id));localStorage.setItem("orders",JSON.stringify(s))},updateOrderStatus:(e,t)=>{let l=r.map(r=>r.id===e?{...r,status:t}:r);i(l);let s=l.filter(e=>!d.find(t=>t.id===e.id));localStorage.setItem("orders",JSON.stringify(s))},getUserOrders:e=>r.filter(t=>t.userId===e).sort((e,t)=>t.orderDate.getTime()-e.orderDate.getTime()),getAllOrders:()=>r.sort((e,t)=>t.orderDate.getTime()-e.orderDate.getTime()),getOrderStats:()=>{let e=new Date,t=new Date(e.getTime()-2592e6),l=new Date(e.getTime()-31536e6),s={};r.filter(e=>e.orderDate>=t).forEach(e=>{let t=e.orderDate.toISOString().split("T")[0];s[t]||(s[t]={count:0,revenue:0}),s[t].count++,s[t].revenue+=e.total});let a={};r.filter(e=>e.orderDate>=l).forEach(e=>{let t="".concat(e.orderDate.getFullYear(),"-").concat(String(e.orderDate.getMonth()+1).padStart(2,"0"));a[t]||(a[t]={count:0,revenue:0}),a[t].count++,a[t].revenue+=e.total});let i={};return r.forEach(e=>{e.items.forEach(e=>{i[e.id]||(i[e.id]={itemName:e.name,count:0}),i[e.id].count+=e.quantity})}),{daily:Object.entries(s).map(e=>{let[t,r]=e;return{date:t,count:r.count,revenue:r.revenue}}),monthly:Object.entries(a).map(e=>{let[t,r]=e;return{month:t,count:r.count,revenue:r.revenue}}),itemFrequency:Object.entries(i).map(e=>{let[t,r]=e;return{itemId:t,itemName:r.itemName,count:r.count}})}}},children:t})}},4033:function(e,t,r){e.exports=r(290)}},function(e){e.O(0,[4737,8129,5884,2748,9100,2971,7864,1744],function(){return e(e.s=6568)}),_N_E=e.O()}]);